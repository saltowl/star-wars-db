(this["webpackJsonpstar-wars-db"]=this["webpackJsonpstar-wars-db"]||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/jedi-order-brands.d835081d.svg"},25:function(e,t,a){e.exports=a(43)},30:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(19),l=a.n(c),o=(a(30),n.a.createContext()),i=a(3),u=a.n(i),s=a(9),m=a(13),f=function(e){return Array.isArray(e)},p=function e(t){if(function(e){return e===Object(e)&&!f(e)&&"function"!==typeof e}(t)){var a={};return Object.keys(t).forEach((function(r){var n;a[(n=r,n.replace(/([-_][a-z])/gi,(function(e){return e.toUpperCase().replace("-","").replace("_","")})))]=e(t[r])})),a}return f(t)?t.map((function(t){return e(t)})):t},d=a(20),h=a(24),g=a(23),E=(a(32),a(21)),b=a.n(E);function v(e){var t=e.message;return n.a.createElement("div",{className:"error-block d-flex row"},n.a.createElement("img",{className:"error-block__icon col-4",src:b.a,alt:"error icon"}),n.a.createElement("div",{className:"error-block__info d-flex col-8"},n.a.createElement("span",null,t),n.a.createElement("span",null,"(but we already sent droids to fix it)")))}v.defaultProps={message:"Something wents wrong"};var y=n.a.memo(v),j=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={hasError:!1},e}return Object(d.a)(a,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?n.a.createElement(y,null):this.props.children}}]),a}(n.a.PureComponent),O=(a(33),a(4)),w=n.a.memo((function(){return n.a.createElement("header",{className:"header d-flex"},n.a.createElement("h1",null,n.a.createElement(O.b,{to:"/"},"Star Wars Database")),n.a.createElement("ul",{className:"d-flex"},n.a.createElement("li",null,n.a.createElement(O.b,{to:"/people/"},"People")),n.a.createElement("li",null,n.a.createElement(O.b,{to:"/planets/"},"Planets")),n.a.createElement("li",null,n.a.createElement(O.b,{to:"/starships/"},"Starships"))))})),k=a(11);a(39);function I(e){var t=e.data,a=e.onItemSelected,r=e.children,c=t.map((function(e){var t=e.id;return n.a.createElement("li",{className:"list-group-item",key:t,onClick:function(){return a(t)}},r(e))}));return n.a.createElement("ul",{className:"item-list list-group"},c)}I.defaultProps={onItemSelected:function(){}};var P=n.a.memo(I),x=a(8),_=(a(40),n.a.memo((function(){return n.a.createElement("div",{className:"loadingio-spinner-dual-ball-ip8n5nh7as"},n.a.createElement("div",{className:"ldio-p5tcz5ewrh"},n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null)))}))),S=function(e){return function(t){var a=Object(r.useState)({data:null,error:!1,loading:!0}),c=Object(k.a)(a,2),l=c[0],o=c[1],i=t.getData;Object(r.useEffect)((function(){i().then((function(e){return o((function(t){return Object(x.a)(Object(x.a)({},t),{},{data:e,loading:!1})}))})).catch((function(){return o((function(e){return Object(x.a)(Object(x.a)({},e),{},{error:!0,loading:!1})}))}))}),[i]);var u=l.loading,s=l.error,m=l.data;return u?n.a.createElement(_,null):s?n.a.createElement(y,null):n.a.createElement(e,Object.assign({},t,{data:m}))}},C=function(e){return function(t){return function(a){return n.a.createElement(t,a,e)}}},N=function(e){return function(t){return function(a){var c=Object(r.useContext)(o),l=e(c);return n.a.createElement(t,Object.assign({},a,l))}}},U=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},D=U(N((function(e){return{getData:e.getAllPeople}})),S,C((function(e){var t=e.name;return n.a.createElement("span",null,t)})))(P),A=U(N((function(e){return{getData:e.getAllPlanets}})),S,C((function(e){var t=e.name,a=e.population;return n.a.createElement("span",null,t," (",a,")")})))(P),R=U(N((function(e){return{getData:e.getAllStarships}})),S,C((function(e){var t=e.name,a=e.model;return n.a.createElement("span",null,t," (",a,")")})))(P);a(41);var M=n.a.memo((function(e){var t=e.item,a=e.image,r=e.children,c=t.name;return n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{className:"item-details__image img-fluid",src:a,alt:c}),n.a.createElement("div",{className:"card-body"},n.a.createElement("h4",null,c),n.a.createElement("ul",{className:"list-group list-group-flush"},n.a.Children.map(r,(function(e){return n.a.cloneElement(e,{item:t})})))))}));var Y=n.a.memo((function(e){var t=e.item,a=e.image,r=e.loading,c=e.error,l=e.children,o=e.type,i=t&&!r&&!c,u=null===t&&!r&&!c;return n.a.createElement("div",{className:"item-details card d-flex"},r&&n.a.createElement(_,null),i&&n.a.createElement(M,{item:t,image:a},l),u&&n.a.createElement("span",null,"Select ",o," from a list"),c&&n.a.createElement(y,null))}));function W(e){var t=e.itemId,a=e.getData,c=e.getImageUrl,l=Object(r.useState)({item:null,image:null,loading:!1,error:!1}),o=Object(k.a)(l,2),i=o[0],u=o[1];return Object(r.useEffect)((function(){if(null!==t){u((function(e){return Object(x.a)(Object(x.a)({},e),{},{loading:!0})}));var e=!1;return a(t).then((function(t){return!e&&u((function(e){return Object(x.a)(Object(x.a)({},e),{},{item:t,loading:!1,image:c(t)})}))})).catch((function(){return!e&&u((function(e){return Object(x.a)(Object(x.a)({},e),{},{error:!0,loading:!1})}))})),function(){return e=!0}}}),[t,a,c]),n.a.createElement(Y,Object.assign({},e,i))}W.defaultProps={type:"an item"};var z=n.a.memo(W);var B=n.a.memo((function(e){var t=e.item,a=e.label,r=e.field;return n.a.createElement("li",{className:"list-group-item"},n.a.createElement("span",{className:"term"},a,":"),n.a.createElement("span",null,t[r]))}));var J=n.a.memo((function(e){var t=e.item,a=e.label,r=e.field;return n.a.createElement("li",{className:"list-group-item"},n.a.createElement("span",{className:"term"},n.a.createElement(O.b,{to:t[r].link},a)))})),F=N((function(e){return{getData:e.getPerson,getImageUrl:e.getPersonImage}}))((function(e){return n.a.createElement(z,Object.assign({},e,{type:"a person"}),n.a.createElement(J,{field:"homeworld",label:"Homeworld",key:"person homeworld"}),n.a.createElement(B,{field:"gender",label:"Gender",key:"person gender"}),n.a.createElement(B,{field:"eyeColor",label:"Eye Color",key:"person eye color"}),n.a.createElement(B,{field:"birthYear",label:"Birth Year",key:"person birth year"}))})),G=N((function(e){return{getData:e.getPlanet,getImageUrl:e.getPlanetImage}}))((function(e){return n.a.createElement(z,Object.assign({},e,{type:"a planet"}),n.a.createElement(B,{field:"population",label:"Population",key:"planet population"}),n.a.createElement(B,{field:"rotationPeriod",label:"Rotation Period",key:"planet rotation period"}),n.a.createElement(B,{field:"diameter",label:"Diameter",key:"planet diameter"}))})),H=N((function(e){return{getData:e.getStarship,getImageUrl:e.getStarshipImage}}))((function(e){return n.a.createElement(z,Object.assign({},e,{type:"a starship"}),n.a.createElement(B,{field:"model",label:"Model",key:"starship model"}),n.a.createElement(B,{field:"length",label:"Length",key:"starship length"}),n.a.createElement(B,{field:"costInCredits",label:"Cost",key:"starship cost in credits"}),n.a.createElement(B,{field:"manufacturer",label:"Manufacturer",key:"starship manufacturer"}),n.a.createElement(B,{field:"crew",label:"Crew",key:"starship crew"}),n.a.createElement(B,{field:"passengers",label:"Passengers",key:"starship passengers"}),n.a.createElement(B,{field:"cargoCapacity",label:"Cargo capacity",key:"starship cargo capacity"}))}));a(42);function L(e){var t=e.updateInterval,a=Object(r.useState)(null),c=Object(k.a)(a,2),l=c[0],o=c[1],i=function(){return o((Math.floor(25*Math.random())+1).toString())};return Object(r.useEffect)((function(){i();var e=setInterval(i,t);return function(){return clearInterval(e)}}),[t]),n.a.createElement("article",{className:"random-planet jumbotron rounded d-flex"},n.a.createElement(G,{itemId:l}))}L.defaultProps={updateInterval:1e4};var $=n.a.memo(L);var q=n.a.memo((function(e){var t=e.children,a="col-md-".concat(Math.floor(12/t.length)),r=t.map((function(e,t){return n.a.createElement("div",{className:a,key:t},e)}));return n.a.createElement("div",{className:"row mb2"},r)})),K=a(1);var Q=Object(K.f)((function(e){var t=e.history,a=e.match;return n.a.createElement(j,null,n.a.createElement(q,null,n.a.createElement(F,{itemId:a.params.id||null}),n.a.createElement(D,{onItemSelected:function(e){return t.push(e)}})))}));var T=Object(K.f)((function(e){var t=e.match,a=e.history;return n.a.createElement(j,null,n.a.createElement(q,null,n.a.createElement(G,{itemId:t.params.id||null}),n.a.createElement(A,{onItemSelected:function(e){return a.push(e)}})))}));var V=Object(K.f)((function(e){var t=e.history;return n.a.createElement(j,null,n.a.createElement(R,{onItemSelected:function(e){return t.push(e)}}))})),X=new function e(){var t=this;Object(m.a)(this,e),this._baseUrl="https://swapi.dev/api",this._imageUrl="https://starwars-visualguide.com/assets/img",this.getResource=function(){var e=Object(s.a)(u.a.mark((function e(a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._baseUrl).concat(a));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Couldn't fetch ".concat(t._baseUrl).concat(a," received ").concat(r.status));case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllPeople=Object(s.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/people/");case 2:return a=e.sent,e.abrupt("return",a.results.map(t._transformPerson));case 4:case"end":return e.stop()}}),e)}))),this.getPerson=function(){var e=Object(s.a)(u.a.mark((function e(a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/people/".concat(a,"/"));case 2:return r=e.sent,e.abrupt("return",t._transformPerson(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPersonImage=function(e){var a=e.id;return"".concat(t._imageUrl,"/characters/").concat(a,".jpg")},this.getPlanetImage=function(e){var a=e.id;return"".concat(t._imageUrl,"/planets/").concat(a,".jpg")},this.getStarshipImage=function(e){var a=e.id;return"".concat(t._imageUrl,"/starships/").concat(a,".jpg")},this.getAllPlanets=Object(s.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/planets/");case 2:return a=e.sent,e.abrupt("return",a.results.map(t._transformPlanet));case 4:case"end":return e.stop()}}),e)}))),this.getPlanet=function(){var e=Object(s.a)(u.a.mark((function e(a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/planets/".concat(a,"/"));case 2:return r=e.sent,e.abrupt("return",t._transformPlanet(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllStarships=Object(s.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/starships/");case 2:return a=e.sent,e.abrupt("return",a.results.map(t._transformStarship));case 4:case"end":return e.stop()}}),e)}))),this.getStarship=function(){var e=Object(s.a)(u.a.mark((function e(a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/starships/".concat(a,"/"));case 2:return r=e.sent,e.abrupt("return",t._transformStarship(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._getId=function(e){return e.match(/\/(\d+)\/$/)[1]},this._transformPlanet=function(e){var a=p(e),r=a.name,n=a.population,c=a.rotationPeriod,l=a.diameter,o=a.url;return{id:t._getId(o),name:r,population:n,rotationPeriod:c,diameter:l}},this._transformPerson=function(e){var a=p(e),r=a.url,n=a.name,c=a.gender,l=a.birthYear,o=a.eyeColor,i=a.homeworld,u=t._getId(i);return{id:t._getId(r),name:n,gender:c,birthYear:l,eyeColor:o,homeworld:{link:"/planets/".concat(u)}}},this._transformStarship=function(e){var a=p(e),r=a.url,n=a.name,c=a.model,l=a.manufacturer,o=a.costInCredits,i=a.length,u=a.crew,s=a.passengers,m=a.cargoCapacity;return{id:t._getId(r),name:n,model:c,costInCredits:o,manufacturer:l,length:i,crew:u,passengers:s,cargoCapacity:m}}};var Z=Object(K.f)(n.a.memo((function(e){var t=e.location;return n.a.createElement("div",{className:"app col mb2 container"},n.a.createElement(j,null,n.a.createElement(o.Provider,{value:X},n.a.createElement(w,null),!/\/starships\/[\d]+/.test(t.pathname)&&n.a.createElement($,null),n.a.createElement(K.c,null,n.a.createElement(K.a,{path:"/",exact:!0,render:function(){return n.a.createElement("h1",null,"Welcome to Star Wars database")}}),n.a.createElement(K.a,{path:"/people/:id?",exact:!0,component:Q}),n.a.createElement(K.a,{path:"/planets/:id?",component:T}),n.a.createElement(K.a,{path:"/starships",exact:!0,component:V}),n.a.createElement(K.a,{path:"/starships/:id",render:function(e){var t=e.match;return n.a.createElement(H,{itemId:t.params.id})}}),n.a.createElement(K.a,{render:function(){return n.a.createElement("h1",null,"Page not found")}})))))})));l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(O.a,null,n.a.createElement(Z,null))),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.8763ffe0.chunk.js.map